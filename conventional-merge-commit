#!/usr/bin/env bash
# prepare-commit-msg:
# rewrite auto-generated merge messages to conventional commit format

commit_source=${2-}
[[ $commit_source == merge ]] || exit 0

commit_msg_file=$1
mapfile -t lines <"$commit_msg_file" || exit 0

first_line=${lines[0]-}
[[ $first_line == Merge\ * ]] || exit 0

lines[0]="chore: merge ${first_line#Merge }"
printf '%s\n' "${lines[@]}" >"$commit_msg_file"
